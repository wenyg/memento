---
title: TODO WebView 表格视图使用说明
date: 2025-10-29
tags: [功能, TODO, WebView]
---

# TODO WebView 表格视图使用说明

## 概述

Memento 的 TODO 功能现在使用 **WebView 表格视图**，提供更直观、更强大的任务管理体验。

## 界面布局

### 工具栏

位于顶部，包含以下控制：

- **🔄 刷新按钮** - 手动刷新 TODO 列表
- **搜索框** - 实时搜索 TODO 内容
- **状态过滤器** - 全部/未完成/已完成
- **优先级过滤器** - 全部/高/中/低/无
- **项目过滤器** - 根据实际项目动态生成

### 统计栏

显示当前筛选结果的统计信息：
- 总计 TODO 数
- 未完成数量
- 已完成数量
- 高优先级未完成数量

### 表格列

| 列名 | 说明 | 交互 |
|------|------|------|
| 状态 | 复选框显示完成状态 | 点击切换完成/未完成 |
| 优先级 | [H]/[M]/[L] 或 - | 点击表头排序 |
| 内容 | TODO 文本内容 | 点击跳转到文件，支持缩进层级 |
| 项目 | 项目名称 | 点击表头排序 |
| 标签 | 标签列表 | 显示所有标签 |
| 截止日期 | YYYY-MM-DD 格式 | 点击表头排序，带颜色提示 |
| 文件 | 文件名 | 点击跳转到文件 |

## 核心功能

### 1. 排序功能

点击任意带 ⇅ 符号的表头可以排序：

- **首次点击** - 升序排列（↑）
- **再次点击** - 降序排列（↓）
- **第三次点击** - 恢复原始顺序

支持排序的列：
- 优先级（高→低）
- 内容（字母顺序）
- 项目（字母顺序）
- 标签（字母顺序）
- 截止日期（时间顺序）
- 文件（字母顺序）

### 2. 过滤功能

#### 搜索框
输入关键词即时过滤，匹配 TODO 内容。

#### 状态过滤
- **全部状态** - 显示所有 TODO
- **未完成** - 只显示未完成的任务
- **已完成** - 只显示已完成的任务

#### 优先级过滤
- **全部优先级** - 显示所有优先级
- **高/中/低** - 显示指定优先级
- **无** - 显示无优先级的 TODO

#### 项目过滤
根据实际存在的项目名称动态生成选项，选择特定项目查看该项目的所有 TODO。

### 3. 交互功能

#### 切换完成状态
点击 TODO 行首的复选框即可切换完成/未完成状态，文件会自动更新。

#### 跳转到文件
- 点击 **内容列** 跳转到 TODO 所在文件的具体行
- 点击 **文件列** 的文件名也可跳转
- 跳转后光标定位到 TODO 行，并居中显示

### 4. 截止日期提示

截止日期列会根据日期显示不同颜色：

- 🔴 **红色（逾期）** - 截止日期已过
- 🟠 **橙色（今日）** - 今天到期
- 🟢 **绿色（即将）** - 明天到期
- ⚪ **普通（正常）** - 其他未来日期

### 5. 层级显示

支持嵌套的 TODO 项，通过缩进显示：

```
主任务（无缩进）
    子任务 1（缩进 1 级）
    子任务 2（缩进 1 级）
        子子任务（缩进 2 级）
```

最多支持 4 级缩进，超过 4 级按 4 级显示。

## 视觉设计

### 颜色系统

- **高优先级** - 🔴 红色加粗
- **中优先级** - 🟡 橙色
- **低优先级** - 🔵 蓝色
- **无优先级** - ⚪ 半透明

### 主题适配

WebView 自动适配 VSCode 主题：
- 使用 VSCode 的主题变量
- 跟随明暗主题切换
- 保持与编辑器一致的视觉风格

### 交互反馈

- **表格行悬停** - 高亮显示
- **已完成任务** - 半透明显示
- **可点击元素** - 鼠标悬停显示下划线
- **排序指示器** - 显示当前排序方向

## 性能优化

- 前端过滤和排序，响应速度快
- 虚拟化渲染（未来可扩展，处理大量 TODO）
- 增量更新，只在必要时刷新

## 使用技巧

### 1. 快速定位

使用搜索框输入关键词，快速找到特定 TODO：
```
搜索 "报告" → 显示所有包含"报告"的任务
```

### 2. 项目管理

使用项目过滤器聚焦单个项目：
```
选择 "Q4Report" → 只显示该项目的所有任务
```

### 3. 优先级处理

结合优先级过滤和排序：
```
1. 状态过滤选择"未完成"
2. 优先级过滤选择"高"
3. 点击"截止日期"排序
→ 显示最紧急的高优先级任务
```

### 4. 批量查看

使用统计栏了解整体进度：
```
总计: 50 | 未完成: 30 | 已完成: 20 | 高优先级: 5
```

## 快捷键

- `Ctrl/Cmd + F` - 聚焦搜索框（浏览器默认）
- `Enter` - 在搜索框中确认搜索

## 常见问题

### Q: 为什么我的 TODO 没有显示？

A: 请检查：
1. 确保使用标准 Markdown 任务列表语法：`- [ ]` 或 `- [x]`
2. 文件扩展名是 `.md`
3. 文件在笔记目录内且未被排除
4. 点击刷新按钮手动刷新

### Q: 如何设置多个标签？

A: 在 TODO 内容中添加多个 `#` 标签：
```markdown
- [ ] 任务内容 #标签1 #标签2 #标签3
```

### Q: 优先级如何设置？

A: 在 TODO 内容末尾添加 `priority:H/M/L`：
```markdown
- [ ] 紧急任务 priority:H
```

### Q: 表格可以自定义列吗？

A: 当前版本暂不支持，未来版本会考虑添加列显示/隐藏功能。

## 与树形视图的对比

| 特性 | WebView 表格视图 | 传统树形视图 |
|------|-----------------|------------|
| 信息展示 | ✅ 所有信息一目了然 | ⚠️ 需要展开查看 |
| 排序 | ✅ 多列可排序 | ⚠️ 固定排序 |
| 搜索 | ✅ 实时搜索 | ❌ 不支持 |
| 过滤 | ✅ 多维度过滤 | ⚠️ 有限分组 |
| 性能 | ✅ 前端处理快速 | ✅ 树形结构高效 |
| 层级展示 | ✅ 缩进显示 | ✅ 树形展开 |

**建议**：日常使用 WebView 表格视图，需要层级结构时使用树形视图。

## 反馈与建议

如果您有任何建议或发现问题，欢迎提交 Issue！

